{"ast":null,"code":"import React,{useEffect,useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Image from\"react-native-web/dist/exports/Image\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Database,{BASE_URL}from'../database';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Comment({comment,currentUser,toggleLike}){const isMine=comment.createdByIdUser===currentUser.idUser;const[likes,setLikes]=useState([]);const[likedByMe,setLikedByMe]=useState(false);useEffect(()=>{getLikes();});const getLikes=async()=>{const data=await Database.getCommentLikes(Number(comment.idComment));setLikes(data);let tested=true;data.forEach(item=>{if(item.idUser===currentUser.idUser){setLikedByMe(true);tested=false;}});if(tested){setLikedByMe(false);}};return _jsxs(View,{style:[styles.commentBubble,isMine?styles.myComment:styles.otherComment],children:[_jsx(Text,{style:styles.author,children:comment.displayedName}),_jsx(Text,{style:styles.commentText,children:comment.text}),comment.images?.map((src,i)=>_jsx(Image,{source:{uri:BASE_URL+src},style:{width:200,height:200,marginTop:6,borderRadius:8},resizeMode:\"cover\"},i)),_jsx(TouchableOpacity,{onPress:()=>toggleLike(comment),children:_jsxs(Text,{style:{color:likedByMe?'red':'#555'},children:[\"\\u2764\\uFE0F \",likes.length||0]})})]});}const styles=StyleSheet.create({container:{flex:1,backgroundColor:'#fff'},centered:{justifyContent:'center',alignItems:'center'},commentsContainer:{padding:12},commentBubble:{marginBottom:10,padding:12,borderRadius:12,maxWidth:'90%'},myComment:{alignSelf:'flex-end',backgroundColor:'#d0f0c0'},otherComment:{alignSelf:'flex-start',backgroundColor:'#e6e6e6'},author:{fontWeight:'bold',color:'#333',marginBottom:4},commentText:{color:'#000',fontSize:15,marginBottom:4},inputContainer:{flexDirection:'row',padding:10,borderTopWidth:1,borderColor:'#ccc',backgroundColor:'#f9f9f9',alignItems:'center',flexWrap:'wrap'},textInput:{flex:1,borderColor:'#ccc',borderWidth:1,borderRadius:10,paddingHorizontal:12,paddingVertical:8,marginRight:10,fontSize:15,backgroundColor:'#fff',color:'#000'}});","map":{"version":3,"names":["React","useEffect","useState","View","Text","TouchableOpacity","Image","StyleSheet","Database","BASE_URL","jsx","_jsx","jsxs","_jsxs","Comment","comment","currentUser","toggleLike","isMine","createdByIdUser","idUser","likes","setLikes","likedByMe","setLikedByMe","getLikes","data","getCommentLikes","Number","idComment","tested","forEach","item","style","styles","commentBubble","myComment","otherComment","children","author","displayedName","commentText","text","images","map","src","i","source","uri","width","height","marginTop","borderRadius","resizeMode","onPress","color","length","create","container","flex","backgroundColor","centered","justifyContent","alignItems","commentsContainer","padding","marginBottom","maxWidth","alignSelf","fontWeight","fontSize","inputContainer","flexDirection","borderTopWidth","borderColor","flexWrap","textInput","borderWidth","paddingHorizontal","paddingVertical","marginRight"],"sources":["/Users/deu/SigmaLTD/components/Comment.js"],"sourcesContent":["// components/Comment.js\n\nimport React, {useEffect, useState} from 'react';\nimport {View, Text, TouchableOpacity, Image, StyleSheet} from 'react-native';\n\nimport Database, {BASE_URL} from '../database';\n\nexport default function Comment({ comment, currentUser, toggleLike }) {\n\tconst isMine = comment.createdByIdUser === currentUser.idUser;\n\tconst [likes, setLikes] = useState([]);\n\tconst [likedByMe , setLikedByMe] = useState(false);\n\tuseEffect(() => {\n\t\tgetLikes();\n\t})\n\tconst getLikes = async () => {\n\t\tconst data = await Database.getCommentLikes(Number(comment.idComment));\n\t\tsetLikes(data);\n\t\tlet tested = true;\n\t\tdata.forEach((item) => {\n\t\t\tif (item.idUser === currentUser.idUser){\n\t\t\t\tsetLikedByMe(true);\n\t\t\t\ttested = false;\n\t\t\t}\n\t\t})\n\t\tif (tested) {\n\t\t\tsetLikedByMe(false);\n\t\t}\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={[\n\t\t\t\tstyles.commentBubble,\n\t\t\t\tisMine ? styles.myComment : styles.otherComment,\n\t\t\t]}\n\t\t>\n\t\t\t<Text style={styles.author}>{comment.displayedName}</Text>\n\t\t\t<Text style={styles.commentText}>{comment.text}</Text>\n\n\t\t\t{comment.images?.map((src, i) => (\n\t\t\t\t<Image\n\t\t\t\t\tkey={i}\n\t\t\t\t\tsource={{uri: BASE_URL + src}}\n\t\t\t\t\tstyle={{width: 200, height: 200, marginTop: 6, borderRadius: 8}}\n\t\t\t\t\tresizeMode=\"cover\"\n\t\t\t\t/>\n\t\t\t))}\n\n\t\t\t<TouchableOpacity onPress={() => toggleLike(comment)}>\n\t\t\t\t<Text style={{color: likedByMe ? 'red' : '#555'}}>\n\t\t\t\t\t❤️ {likes.length || 0}\n\t\t\t\t</Text>\n\t\t\t</TouchableOpacity>\n\t\t</View>\n\t);\n}\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1,\n\t\tbackgroundColor: '#fff',\n\t},\n\tcentered: {\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t},\n\tcommentsContainer: {\n\t\tpadding: 12,\n\t},\n\tcommentBubble: {\n\t\tmarginBottom: 10,\n\t\tpadding: 12,\n\t\tborderRadius: 12,\n\t\tmaxWidth: '90%',\n\t},\n\tmyComment: {\n\t\talignSelf: 'flex-end',\n\t\tbackgroundColor: '#d0f0c0',\n\t},\n\totherComment: {\n\t\talignSelf: 'flex-start',\n\t\tbackgroundColor: '#e6e6e6',\n\t},\n\tauthor: {\n\t\tfontWeight: 'bold',\n\t\tcolor: '#333',\n\t\tmarginBottom: 4,\n\t},\n\tcommentText: {\n\t\tcolor: '#000',\n\t\tfontSize: 15,\n\t\tmarginBottom: 4,\n\t},\n\tinputContainer: {\n\t\tflexDirection: 'row',\n\t\tpadding: 10,\n\t\tborderTopWidth: 1,\n\t\tborderColor: '#ccc',\n\t\tbackgroundColor: '#f9f9f9',\n\t\talignItems: 'center',\n\t\tflexWrap: 'wrap',\n\t},\n\ttextInput: {\n\t\tflex: 1,\n\t\tborderColor: '#ccc',\n\t\tborderWidth: 1,\n\t\tborderRadius: 10,\n\t\tpaddingHorizontal: 12,\n\t\tpaddingVertical: 8,\n\t\tmarginRight: 10,\n\t\tfontSize: 15,\n\t\tbackgroundColor: '#fff',\n\t\tcolor: '#000',\n\t},\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}